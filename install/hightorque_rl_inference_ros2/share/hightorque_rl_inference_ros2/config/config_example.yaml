########################################   AMP Policy RL parameters   ########################################

# 基本参数 - AMP 策略
num_actions: 22        # 发布到lowlevel的关节数（22dof：20控制 + 2头部固定为0）
policy_dofs: 20        # 策略输出的自由度（20个关节，交错顺序）
num_single_obs: 69     # AMP策略: base_ang_vel(3) + gravity(3) + commands(3) + dof_pos(20) + dof_vel(20) + actions(20) = 69

# 关节顺序映射：策略输出(交错顺序) -> PD配置(分组顺序)
# 策略输出20个关节，重新排序到PD配置的前20个位置，最后2个头部关节固定为0
policy_to_control_map: [0, 12, 6, 16, 1, 13, 7, 17, 2, 14, 8, 18, 3, 15, 9, 19, 4, 10, 5, 11]

# 模型路径
policy_name: "pi_plus_amp_1110_policy_1.rknn"

# 控制频率 (与 amp_pi_plus_20dof.yaml 一致：50Hz)
dt: 0.001
decimation: 20         # 1000Hz / 20 = 50Hz

# 观测值缩放参数（与 amp_pi_plus_20dof.yaml 一致）
cmd_lin_vel_scale: 1.0
cmd_ang_vel_scale: 1.0
rbt_lin_pos_scale: 1.0
rbt_lin_vel_scale: 1.0
rbt_ang_vel_scale: 1.0

# 观测值裁剪
clip_obs: 18.0

# 动作限制（对应策略输出的20个关节，与 amp_pi_plus_20dof.yaml 完全一致）
clip_actions_lower: [-10, -10, -10, -10,
                     -10, -10, -10, -10,
                     -10, -10, -10, -10,
                     -10, -10, -10, -10, 
                     -10, -10, -10, -10]

clip_actions_upper: [ 10,  10,  10,  10,
                      10,  10,  10,  10,
                      10,  10,  10,  10,
                      10,  10,  10,  10,  
                      10,  10,  10,  10]

# 动作缩放（与 amp_pi_plus_20dof.yaml 一致）
action_scale: 0.25

# ==================== AMP 策略特定参数 ====================

# 控制模式 (Soccer/Fight - 影响速度响应和加速特性)
control_mode: "Soccer"

# Soccer/Fight 模式参数（与 amp_pi_plus_20dof.yaml 一致）
cmd_vel_filter_scale_soccer: 0.7   # Soccer模式滤波系数（不按LT时）
cmd_vel_filter_scale_fight: 0.9    # Fight模式滤波系数
cmd_vel_x_max_soccer_normal: 0.50  # Soccer模式正常最大x速度
cmd_vel_x_max_soccer_boost: 1.20   # Soccer模式LT加速最大x速度
cmd_vel_x_max_fight: 0.70          # Fight模式最大x速度

# 速度限制（与 amp_pi_plus_20dof.yaml 完全一致）
cmd_vel_x_min: -0.50
cmd_vel_y_min: -0.6
cmd_vel_y_max: 0.6
cmd_vel_yaw_min: -2.0
cmd_vel_yaw_max: 2.0

# 动作滤波系数 (与 amp_policy.cpp 第190行一致，当前设为1.0不滤波)
action_filter_scale: 1.0

# 动作缩放系数（与 amp_pi_plus_20dof.yaml 完全一致）
# 20dof关节顺序：[l_hip_pitch, l_shoulder_pitch, r_hip_pitch, r_shoulder_pitch,
#                 l_hip_roll, l_shoulder_roll, r_hip_roll, r_shoulder_roll,
#                 l_thigh, l_upper_arm, r_thigh, r_upper_arm,
#                 l_calf, l_elbow, r_calf, r_elbow,
#                 l_ankle_pitch, r_ankle_pitch, l_ankle_roll, r_ankle_roll]
action_scales: [ 1.0,  1.0,  1.0,  1.0,
                 1.0,  1.0,  1.0,  1.0,
                 1.0,  1.0,  1.0,  1.0,
                 1.0,  1.0,  1.0,  1.0,
                 1.0,  1.0,  1.0,  1.0]

# 默认姿态（与 amp_pi_plus_20dof.yaml urdf_offset 完全一致）
# 将 urdf_offset 作为 default_pose，这样动作输出 = action * scale + default_pose
default_pose: [ -0.25,  1.57, -0.25,  1.57,
                 0.00, -1.37,  0.00,  1.37,
                 0.00,  1.57,  0.00, -1.57,
                 0.65, -1.20,  0.65, -1.20,
                -0.40, -0.40,  0.00,  0.00]

# ==================== 电机配置（20dof） ====================
# 注意：如果使用完整20dof，需要扩展这些配置
# 这里暂时保持12dof配置，实际使用时需要根据实际电机配置调整
motor_direction: [1, 1, -1, -1, 1, 1, -1, 1, -1, 1, -1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
map_index: [5, 4, 3, 2, 1, 0, 11, 10, 9, 8, 7, 6, 17, 16, 15, 14, 13, 12, 19, 18]
urdf_dof_pos_offset: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
